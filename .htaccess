RewriteEngine On

# Skip existing files and directories
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Internally rewrite clean URLs to .php files in any folder
RewriteRule ^(.+?)/?$ $1.php [L]

# Redirect .php URLs to clean version for canonical URLs
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/(.+?)\.php\sHTTP/
RewriteRule ^(.+?)\.php$ /$1 [R=301,L]
